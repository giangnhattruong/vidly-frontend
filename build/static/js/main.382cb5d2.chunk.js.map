{"version":3,"sources":["services/logService.js","services/httpService.js","services/authService.js","components/common/ProtectedRoute.jsx","components/NavBar.jsx","services/movieService.js","services/genreService.js","components/common/Pagination.jsx","utils/paginate.js","components/ListGroup.jsx","components/common/TableHeader.jsx","components/common/TableBody.jsx","components/common/Table.jsx","components/common/Like.jsx","components/MoviesTable.jsx","components/common/Input.jsx","components/common/SearchForm.jsx","containers/Movies.jsx","components/common/Select.jsx","components/common/Form.jsx","components/MovieForm.jsx","components/Rentals.jsx","components/Customers.jsx","components/NotFound.jsx","components/LoginForm.jsx","services/userService.js","components/RegisterForm.jsx","components/Logout.jsx","App.js","reportWebVitals.js","index.js"],"names":["init","Sentry","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","log","error","axios","defaults","baseURL","process","interceptors","response","use","status","logger","toast","Promise","reject","get","post","put","delete","setJwt","jwt","headers","common","tokenKey","http","getJwt","login","email","password","a","data","localStorage","setItem","getItem","loginWithJwt","logout","removeItem","getCurrentUser","jwtDecode","ex","ProtectedRoute","Component","component","render","rest","props","auth","to","pathname","state","from","location","NavBar","user","className","type","id","Fragment","name","movieUrl","saveMovie","deleteMovie","getGenres","Pagination","styles","cursor","itemsCount","pageSize","currentPage","onPageChange","pagesCount","pages","_","range","pageList","map","page","style","onClick","href","lastPageNumber","length","paginate","items","pageNumber","startIndex","slice","take","value","ListGroup","allGenres","genres","onItemSelect","selectedItem","textProperty","valueProperty","g","defaultProps","TableHeader","raiseSort","path","currentSortingValue","sortingValue","onMovieSort","order","raiseSortIcon","column","classes","columns","this","tableHeaders","label","scope","key","TableBody","renderCell","item","content","index","_id","Table","movies","Like","userLikes","onMovieLike","includes","MoviesTable","movie","currentUser","likes","deleteColumn","onMovieDelete","isAdmin","push","Input","htmlFor","autoFocus","role","SearchForm","labelKey","onChange","e","currentTarget","list","placeholder","d","Movies","selectedGenreId","searchQuery","getPagedData","allMovies","filteredMovies","filterMoviesByGenre","filterMovieBySearch","sortedMovies","orderBy","totalCount","view","text","table","handleDelete","handleLike","handleSort","handlePageChange","handleSearchChange","setState","movieId","spliceIndex","indexOf","splice","originalMovies","filter","m","handleGenreSelect","string","title","toLowerCase","genre","Select","options","valueKey","o","Form","errors","validate","schema","abortEarly","details","message","validateProperty","$_terms","keys","find","k","handleSubmit","event","preventDefault","doSubmit","handleChange","input","errorMessage","disabled","MovieForm","genreId","numberInStock","dailyRentalRate","Joi","object","required","number","ruleset","min","max","rule","match","history","params","mapToViewModel","replace","populateGenres","populateMovie","onSubmit","renderInput","renderSelect","renderButton","Rentals","Customers","NotFound","LoginForm","window","register","RegisterForm","minDomainSegments","maxDomainSegments","tlds","allow","pattern","userService","Logout","App","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"yNAmBe,OACdA,KAjBD,WACCC,IAAY,CACXC,IAAmB,6EACnBC,aAAmB,CAAE,IAAIC,IAAaC,gBAKtCC,iBAAmB,KAUpBC,IAND,SAAaC,GACZP,IAAwBO,K,uHCZzBC,IAAMC,SAASC,QAAUC,iBAEzBH,IAAMI,aAAaC,SAASC,IAAI,MAAM,SAACP,GAQtC,OAPsBA,EAAMM,UAAYN,EAAMM,SAASE,QAAU,KAAOR,EAAMM,SAASE,OAAS,MAG/FC,EAAOV,IAAIC,GACXU,IAAMV,MAAM,kCAGNW,QAAQC,OAAOZ,MAGvB,IAIe,GACda,IAASZ,IAAMY,IACfC,KAASb,IAAMa,KACfC,IAASd,IAAMc,IACfC,OAASf,IAAMe,OACfC,OATc,SAACC,GACfjB,IAAMC,SAASiB,QAAQC,OAAO,gBAAkBF,ICb3CG,EAAW,QAEjBC,EAAKL,OAAOM,KAEL,IAAMC,EAAK,uCAAG,WAAOC,EAAOC,GAAd,iBAAAC,EAAA,sEACQL,EAAKR,KAPd,QAOgC,CAAEW,QAAOC,aADxC,gBACNR,EADM,EACZU,KACRC,aAAaC,QAAQT,EAAUH,GAFX,2CAAH,wDAsBX,SAASK,IACf,OAAOM,aAAaE,QAAQV,GAGd,OACdG,QACAQ,aAvB2B,SAACd,GAC5BW,aAAaC,QAAQT,EAAUH,IAuB/Be,OApBqB,WACrBJ,aAAaK,WAAWb,IAoBxBc,eAjB6B,WAC7B,IACC,IAAMjB,EAAMW,aAAaE,QAAQV,GACjC,OAAOe,YAAUlB,GAChB,MAAOmB,GACR,OAAO,OAaRd,U,gCChBce,EApBQ,SAAC,GAA+C,IAAlCC,EAAiC,EAA5CC,UAAsBC,EAAsB,EAAtBA,OAAWC,EAAW,iBACrE,OACC,cAAC,IAAD,2BACKA,GADL,IAECD,OAAQ,SAACE,GACR,OAAKC,EAAKT,iBASHI,EAAY,cAACA,EAAD,eAAeI,IAAYF,EAAOE,GAPnD,cAAC,IAAD,CACCE,GAAI,CACHC,SAAW,SACXC,MAAW,CAAEC,KAAML,EAAMM,kBC2DlBC,EAtEA,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACjB,OACC,qBAAKC,UAAU,gDAAf,SACC,sBAAKA,UAAU,kBAAf,UACC,cAAC,IAAD,CAAMA,UAAU,eAAeP,GAAG,IAAlC,mBAGA,wBACCO,UAAU,iBACVC,KAAK,SACL,iBAAe,WACf,iBAAe,aACf,gBAAc,YACd,gBAAc,QACd,aAAW,oBAPZ,SASC,sBAAMD,UAAU,0BAEjB,qBAAKA,UAAU,2BAA2BE,GAAG,YAA7C,SACC,qBAAIF,UAAU,aAAd,UACC,oBAAIA,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAW,eAAa,OAAOP,GAAG,UAArD,sBAID,oBAAIO,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,aAAjC,yBAID,oBAAIO,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,WAAjC,wBAICM,GACD,eAAC,IAAMI,SAAP,WACC,oBAAIH,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,SAAjC,qBAID,oBAAIO,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,YAAjC,2BAMFM,GACA,eAAC,IAAMI,SAAP,WACC,oBAAIH,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,WAAjC,SACEM,EAAKK,SAGR,oBAAIJ,UAAU,WAAd,SACC,cAAC,IAAD,CAASA,UAAU,WAAWP,GAAG,UAAjC,oC,QC1DT,SAASY,EAASH,GACjB,MAAM,WAAN,OAAkBA,GAAU,IAGtB,IAQMI,EAAY,SAACJ,EAAI1B,GAC7B,OAAI0B,EACIhC,EAAKP,IAAI0C,EAASH,GAAK1B,GAExBN,EAAKR,KAAK2C,IAAY7B,IAGjB+B,EAAc,SAACL,GAC3B,OAAOhC,EAAKN,OAAOyC,EAASH,KClBhBM,EAAY,WACxB,OAAOtC,EAAKT,IAHO,Y,iBC0DLgD,EAxDI,SAAClB,GACnB,IAAImB,EAAS,CAAEC,OAAQ,WAEfC,EAAoDrB,EAApDqB,WAAYC,EAAwCtB,EAAxCsB,SAAUC,EAA8BvB,EAA9BuB,YAAaC,EAAiBxB,EAAjBwB,aAEvCC,EAAaJ,EAAaC,EACxBI,EAAQC,IAAEC,MAAM,EAAGH,EAAa,GAChCI,EAAWH,EAAMI,KAAI,SAACC,GAAD,OAC1B,oBAAetB,UAAWsB,IAASR,EAAc,mBAAqB,YAAtE,SACC,wBAAQd,UAAU,YAAYuB,MAAOb,EAAQc,QAAS,kBAAMT,EAAaO,IAAOG,KAAK,IAArF,SACEH,KAFMA,MAQJI,EAAiBT,EAAMA,EAAMU,OAAS,GAE5C,OACC,qBAAK,aAAW,kBAAkB3B,UAAU,gCAA5C,SACC,qBAAIA,UAAU,aAAd,UACC,oBAAIA,UAAU,YAAd,SACC,wBACCA,UAAU,YACVuB,MAAOb,EACPc,QAAS,kBAAMT,EAVI,IAWnBU,KAAK,IACL,aAAW,WALZ,SAOC,sBAAM,cAAY,OAAlB,sBAGDL,EACD,oBAAIpB,UAAU,YAAd,SACC,wBACCA,UAAU,YACVuB,MAAOb,EACPc,QAAS,kBAAMT,EAAaW,IAC5BD,KAAK,IACL,aAAW,OALZ,SAOC,sBAAM,cAAY,OAAlB,4BC3CC,SAASG,EAASC,EAAOC,EAAYjB,GAC3C,IAAMkB,GAAcD,EAAa,GAAKjB,EACtC,OAAOK,IAAEW,GAAOG,MAAMD,GAAYE,KAAKpB,GAAUqB,Q,WCD5CC,EAAY,SAAC5C,GAClB,IAAgB6C,EAAuE7C,EAA/E8C,OAAmBC,EAA4D/C,EAA5D+C,aAAcC,EAA8ChD,EAA9CgD,aAAcC,EAAgCjD,EAAhCiD,aAAcC,EAAkBlD,EAAlBkD,cACjE/B,EAAS,CAAEC,OAAQ,WACjB0B,EAASD,EAAUf,KAAI,SAACqB,GAAD,OAC5B,oBAEClB,QAAS,kBAAMc,EAAaI,EAAED,KAC9BlB,MAAOb,EACPV,UAAS,0BAAqBuC,IAAiBG,EAAED,GAAiB,SAAW,IAJ9E,SAMEC,EAAEF,IALEE,EAAED,OAQT,OAAO,oBAAIzC,UAAU,aAAd,SAA4BqC,KAGpCF,EAAUQ,aAAe,CACxBH,aAAgB,OAChBC,cAAgB,OAGFN,QCtBTS,E,4MACLC,UAAY,SAACC,GACZ,GAAIA,EAAM,CACT,MAA2D,EAAKvD,MAA1CwD,EAAtB,EAAQC,aAAmCC,EAA3C,EAA2CA,YACvCC,EAAQ,MACRH,EAAoBD,OAASA,IAChCI,EAAsC,QAA9BH,EAAoBG,MAAkB,OAAS,OAExDD,EAAY,CAAEH,OAAMI,Y,EAItBC,cAAgB,SAACC,GAChB,IAAQJ,EAAiB,EAAKzD,MAAtByD,aACR,IAAKI,EAAON,MAAQM,EAAON,OAASE,EAAaF,KAAM,OAAO,KAC9D,IAAIO,EAAiC,QAAvBL,EAAaE,MAAkB,iBAAmB,kBAChE,OAAO,mBAAGlD,UAAWqD,EAAS,cAAY,U,4CAG3C,WAAU,IAAD,OACAC,EAAYC,KAAKhE,MAAjB+D,QACF5C,EAAS,CAAEC,OAAQ,WACnB6C,EAAeF,EAAQjC,KAAI,SAAC+B,GAAD,OAChC,qBAEC7B,MAAO6B,EAAOK,MAAQ/C,EAAS,GAC/Bc,QAAS,kBAAM,EAAKqB,UAAUO,EAAON,OACrCY,MAAM,MAJP,UAMEN,EAAOK,MANT,IAMiB,EAAKN,cAAcC,KAL9BA,EAAOK,OAASL,EAAOO,QAS9B,OACC,gCACC,+BACC,oBAAgBD,MAAM,MAAtB,cAAQ,SAGPF,W,GAvCoBrE,aA8CXyD,IC7CTgB,E,4MACLC,WAAa,SAACC,EAAMV,GACnB,OAAIA,EAAOW,QAAgB,6BAAqCX,EAAOW,QAAQD,IAA3CV,EAAON,MAAQM,EAAOO,KACnD,6BAAuBzC,IAAEzD,IAAIqG,EAAMV,EAAON,OAAjCM,EAAON,O,4CAGxB,WAAU,IAAD,OACR,EAA0BS,KAAKhE,MAAvBf,EAAR,EAAQA,KAAM8E,EAAd,EAAcA,QACd,OACC,gCACE9E,EAAK6C,KAAI,SAACyC,EAAME,GAAP,OACT,+BACC,oBAAgBN,MAAM,MAAtB,SACEM,EAAQ,GADF,SAGPV,EAAQjC,KAAI,SAAC+B,GACb,OAAO,EAAKS,WAAWC,EAAMV,QALtBU,EAAKG,c,GAXK9E,aAyBTyE,ICfAM,EATD,SAAC,GAAoD,IAAlDZ,EAAiD,EAAjDA,QAASN,EAAwC,EAAxCA,aAAcC,EAA0B,EAA1BA,YAAakB,EAAa,EAAbA,OACpD,OACC,wBAAOnE,UAAU,QAAjB,UACC,cAAC,EAAD,CAAasD,QAASA,EAASN,aAAcA,EAAcC,YAAaA,IACxE,cAAC,EAAD,CAAWzE,KAAM2F,EAAQb,QAASA,QCKtBc,EAXF,SAAC,GAAoC,IAAlClE,EAAiC,EAAjCA,GAAImE,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,YAC1BjB,EAAU,cACTgB,EAAUE,SAASrE,KACvBmD,GAAW,MAKZ,OAAO,mBAAGrD,UAAWqD,EAAS7B,QAAS,kBAAM8C,EAAYpE,IAAKqB,MAFjD,CAAEZ,OAAQ,WAEsD,cAAY,UCiC3E6D,E,kDAdd,aAAe,IAAD,uBACb,gBAvBDlB,QAAU,CACT,CAAER,KAAM,QAASW,MAAO,SACxB,CAAEX,KAAM,aAAcW,MAAO,SAC7B,CAAEX,KAAM,gBAAiBW,MAAO,SAChC,CAAEX,KAAM,kBAAmBW,MAAO,QAClC,CACCE,IAAU,OACVI,QAAU,SAACU,GAAD,OACT,cAAC,EAAD,CAAMJ,UAAW,EAAK9E,MAAMmF,YAAYC,MAAOL,YAAa,EAAK/E,MAAM+E,YAAapE,GAAIuE,EAAMR,SAcnF,EATdW,aAAe,CACdjB,IAAU,SACVI,QAAU,SAACU,GAAD,OACT,wBAAQjD,QAAS,kBAAM,EAAKjC,MAAMsF,cAAcJ,EAAMR,MAAMjE,UAAU,wBAAtE,sBAQD,IAAMD,EAAOP,EAAKT,iBAFL,OAGTgB,GAAQA,EAAK+E,SAChB,EAAKxB,QAAQyB,KAAK,EAAKH,cAJX,E,0CAQd,WACC,MAA8CrB,KAAKhE,MAA3C4E,EAAR,EAAQA,OAAQlB,EAAhB,EAAgBA,YAAaD,EAA7B,EAA6BA,aAC7B,OAAO,cAAC,EAAD,CAAOmB,OAAQA,EAAQb,QAASC,KAAKD,QAASN,aAAcA,EAAcC,YAAaA,Q,GAjCtE9D,a,2BCYX6F,GAhBD,SAAC,GAAqC,IAAnC5E,EAAkC,EAAlCA,KAAMqD,EAA4B,EAA5BA,MAAO7G,EAAqB,EAArBA,MAAU0C,EAAW,iBAClD,OACC,sBAAKU,UAAU,OAAf,UACC,uBAAOiF,QAAS7E,EAAMJ,UAAU,aAAhC,SACEyD,IAEF,iDAAWnE,GAAX,IAAiB4F,UAAoB,aAAT9E,EAAqBF,GAAIE,EAAMA,KAAMA,EAAMJ,UAAU,kBAChFpD,GACA,qBAAKoD,UAAU,qBAAqBmF,KAAK,QAAzC,SACEvI,QCRAwI,G,4JACL,WACC,MAA4C7B,KAAKhE,MAAzCf,EAAR,EAAQA,KAAM6G,EAAd,EAAcA,SAAUnD,EAAxB,EAAwBA,MAAOoD,EAA/B,EAA+BA,SAE/B,OACC,sBAAKtF,UAAU,OAAf,UACC,uBACCsF,SAAU,SAACC,GACVD,EAASC,EAAEC,cAActD,QAE1BA,MAAOA,EACPlC,UAAU,eACVyF,KAAK,kBACLvF,GAAG,kBACHwF,YAAY,sBAEb,0BAAUxF,GAAG,kBAAb,SAAgC1B,EAAK6C,KAAI,SAACsE,GAAD,OAAO,wBAAoBzD,MAAOyD,EAAEN,IAAhBM,EAAE1B,iB,GAhB1C9E,aAsBViG,MCbTQ,G,4MACLjG,MAAQ,CACPwE,OAAkB,GAClB9B,OAAkB,GAClBqC,YAAkB,CAAEC,MAAO,IAC3B9D,SAAkB,EAClBC,YAAkB,EAClB+E,gBAAkB,GAClB7C,aAAkB,CAAEF,KAAM,QAASI,MAAO,OAC1C4C,YAAkB,I,EAGnBC,aAAe,WACd,MAAiG,EAAKpG,MAAtFqG,EAAhB,EAAQ7B,OAAmBtD,EAA3B,EAA2BA,SAAUC,EAArC,EAAqCA,YAAa+E,EAAlD,EAAkDA,gBAAiB7C,EAAnE,EAAmEA,aAAc8C,EAAjF,EAAiFA,YAC7EG,EAAiB,EAAKC,oBAAoBF,EAAWH,GACrDC,IACHG,EAAiB,EAAKE,oBAAoBH,EAAWF,IAEtD,IAAMM,EAAelF,IAAEmF,QAAQJ,EAAgB,CAAEjD,EAAaF,MAAQ,CAAEE,EAAaE,QAC/EiB,EAASvC,EAASwE,EAActF,EAAaD,GAEnD,MAAO,CAAEyF,WADsBF,EAAvBzE,OACanD,KAAM2F,I,EAG5BoC,KAAO,WACN,MAAkF,EAAK5G,MAA/EwE,EAAR,EAAQA,OAAQO,EAAhB,EAAgBA,YAAa7D,EAA7B,EAA6BA,SAAUC,EAAvC,EAAuCA,YAAakC,EAApD,EAAoDA,aAAc8C,EAAlE,EAAkEA,YAClE,EAA6B,EAAKC,eAA1BO,EAAR,EAAQA,WAAY9H,EAApB,EAAoBA,KACZuB,EAAS,EAAKR,MAAdQ,KAEJyG,EAAO,sBACPC,EAAQ,KAwBZ,OAtBmB,IAAfH,IACHE,EAAI,kBAAcF,EAAd,WACJG,EACC,eAAC,IAAMtG,SAAP,WACC,cAAC,EAAD,CACCgE,OAAQ3F,EACRkG,YAAaA,EACbG,cAAe,EAAK6B,aACpBpC,YAAa,EAAKqC,WAClB1D,YAAa,EAAK2D,WAClB5D,aAAcA,IAEf,cAAC,EAAD,CACCpC,WAAY0F,EACZzF,SAAUA,EACVC,YAAaA,EACbC,aAAc,EAAK8F,uBAOtB,eAAC,IAAM1G,SAAP,WACEJ,GACA,cAAC,IAAD,CAAMN,GAAG,cAAcO,UAAU,uBAAjC,uBAID,mBAAGA,UAAU,kBAAb,SAAgCwG,IAChC,cAAC,GAAD,CAAYhI,KAAM2F,EAAQjC,MAAO4D,EAAaT,SAAS,QAAQC,SAAU,EAAKwB,qBAC7EL,M,EAKJI,iBAAmB,SAACvF,GACnB,EAAKyF,SAAS,CACbjG,YAAcQ,K,EAIhBqF,WAAa,SAACK,GACb,IAAItC,EAAW,eAAQ,EAAK/E,MAAM+E,aAClC,GAAIA,EAAYC,MAAMJ,SAASyC,GAAU,CACxC,IAAIC,EAAcvC,EAAYC,MAAMuC,QAAQF,GAC5CtC,EAAYC,MAAMwC,OAAOF,EAAa,QAEtCvC,EAAYC,MAAMI,KAAKiC,GAExB,EAAKD,SAAL,2BACI,EAAKpH,OADT,IAEC+E,kB,EAIFgC,a,uCAAe,WAAOxG,GAAP,iBAAA3B,EAAA,6DACR6I,EAAiB,EAAKzH,MAAMwE,OAE5BA,EAASiD,EAAeC,QAAO,SAACC,GAAD,OAAOA,EAAErD,MAAQ/D,KACtD,EAAK6G,SAAS,CAAE5C,WAJF,kBAOP5D,EAAYL,GAPL,uDAST,KAAGhD,UAAmC,MAAvB,KAAGA,SAASE,QAC9BE,IAAMV,MAAM,wCAGb,EAAKmK,SAAS,CAAE5C,OAAQiD,IAbX,yD,wDAiBfG,kBAAoB,WAA2B,IAA1B1B,EAAyB,uDAAP,GACtC,EAAKkB,SAAS,CACblB,kBACAC,YAAkB,GAClBhF,YAAkB,K,EAIpBgG,mBAAqB,WAAuB,IAAtBhB,EAAqB,uDAAP,GACnC,EAAKiB,SAAS,CACbjB,cACAD,gBAAkB,GAClB/E,YAAkB,K,EAIpB8F,WAAa,SAAC5D,GACb,EAAK+D,SAAS,CAAE/D,kB,EA2CjBmD,oBAAsB,SAACH,EAAWwB,GACjC,OAAIA,EACIxB,EAAUqB,QAAO,SAACC,GAAD,OAAOA,EAAEG,MAAMC,cAAcnD,SAASiD,EAAOE,kBAE/D1B,G,EAGRE,oBAAsB,SAACF,EAAWH,GACjC,OAAIA,EACIG,EAAUqB,QAAO,SAACC,GAAD,OAAOA,EAAEK,MAAM1D,MAAQ4B,KAEzCG,G,8FAnDR,kCAAAzH,EAAA,sEZlIOL,EAAKT,IAAI4C,KYkIhB,uBACe8D,EADf,EACS3F,KADT,SAEgCgC,IAFhC,gBAEe6B,EAFf,EAES7D,KACR+E,KAAKwD,SAAS,CACb5C,SACA9B,OAAM,CAAK,CAAE4B,IAAK,GAAI7D,KAAM,eAAtB,mBAAyCiC,MALjD,gD,sFASA,WACC,MAAmFkB,KAAK5D,MAAxEqG,EAAhB,EAAQ7B,OAAmBrD,EAA3B,EAA2BA,YAAaD,EAAxC,EAAwCA,SAAUgF,EAAlD,EAAkDA,gBAAiBC,EAAnE,EAAmEA,YAC/DG,EAAiB1C,KAAK2C,oBAAoBF,EAAWH,GACrDC,IACHG,EAAiB1C,KAAK4C,oBAAoBH,EAAWF,KAGjDhF,EAAc,GAAKD,EAAW,EADJoF,EAAvBtE,QAC6Cb,EAAc,GAClEyC,KAAKsD,iBAAiB/F,EAAc,K,oBAItC,WACC,MAAoCyC,KAAK5D,MAAjC0C,EAAR,EAAQA,OAAQwD,EAAhB,EAAgBA,gBAChB,OACC,eAAC,IAAM1F,SAAP,WACC,oBAAIH,UAAU,mBAAd,wBACA,sBAAKA,UAAU,MAAf,UACC,qBAAKA,UAAU,iBAAf,SACC,cAAC,EAAD,CACCqC,OAAQA,EACRC,aAAciB,KAAKgE,kBACnBhF,aAAcsD,MAGhB,qBAAK7F,UAAU,MAAf,SAAsBuD,KAAKgD,mB,GA/JXpH,aAoLNyG,M,yFCvKAgC,GAvBA,SAAC,GAAkE,IAAhExH,EAA+D,EAA/DA,KAAMqD,EAAyD,EAAzDA,MAAOoE,EAAkD,EAAlDA,QAASjL,EAAyC,EAAzCA,MAAOkL,EAAkC,EAAlCA,SAAUzC,EAAwB,EAAxBA,SAAa/F,EAAW,kBAChF,OACC,sBAAKU,UAAU,OAAf,UACC,uBAAOiF,QAAS7E,EAAMJ,UAAU,aAAhC,SACEyD,IAEF,mDAAYnE,GAAZ,IAAkBc,KAAMA,EAAMF,GAAIE,EAAMJ,UAAU,cAAc,aAAW,eAA3E,UACC,wBAA2BkC,MAAM,GAAjC,0BAA+CuB,IAAnC,gBACXoE,EAAQxG,KAAI,SAAC0G,GAAD,OACZ,wBAA0B7F,MAAO6F,EAAED,GAAnC,SACEC,EAAE1C,IADS0C,EAAED,WAKhBlL,GACA,qBAAKoD,UAAU,qBAAqBmF,KAAK,QAAzC,SACEvI,QCdAoL,G,4MACLrI,MAAQ,CACPnB,KAAS,GACTyJ,OAAS,I,EAGVC,SAAW,WACV,IAAQ1J,EAAS,EAAKmB,MAAdnB,KAEA5B,EAAU,EAAKuL,OAAOD,SAAS1J,EADvB,CAAE4J,YAAY,IACtBxL,MACR,IAAKA,EAAO,OAAO,KAEnB,IANgB,EAMVqL,EAAS,GANC,eAOCrL,EAAMyL,SAPP,IAOhB,2BAAgC,CAAC,IAAxBvE,EAAuB,QAC/BmE,EAAOnE,EAAKhB,KAAK,IAAMgB,EAAKwE,SARb,8BAUhB,OAAOL,G,EAGRM,iBAAmB,YAAsB,IAAnBnI,EAAkB,EAAlBA,KAAM8B,EAAY,EAAZA,MAEnBtF,EADW,EAAKuL,OAAOK,QAAQC,KAAKC,MAAK,SAACC,GAAD,OAAOA,EAAEhF,MAAQvD,KAA1D+H,OACiBD,SAAShG,GAA1BtF,MACR,OAAOA,EAAQA,EAAMyL,QAAQ,GAAGC,QAAU,M,EAG3CM,aAAe,SAACC,GACfA,EAAMC,iBACN,IAAMb,EAAS,EAAKC,WACpB,EAAKnB,SAAS,CAAEkB,OAAQA,GAAU,KAC9BA,GAEJ,EAAKc,Y,EAGNC,aAAe,YAA+B,IAAbC,EAAY,EAA3BzD,cACXyC,EAAM,eAAQ,EAAKtI,OACnBuJ,EAAe,EAAKX,iBAAiBU,GACvCC,EAAcjB,EAAOgB,EAAM7I,MAAQ8I,SAC3BjB,EAAOgB,EAAM7I,MAEzB,IAAM5B,EAAI,eAAQ,EAAKmB,MAAMnB,MAC7BA,EAAKyK,EAAM7I,MAAQ6I,EAAM/G,MAEzB,EAAK6E,SAAS,CAAEvI,OAAMyJ,Y,kDAGvB,SAAaxE,GACZ,OACC,wBAAQ0F,SAAU5F,KAAK2E,WAAYlI,UAAU,kBAA7C,SACEyD,M,yBAKJ,SAAYrD,EAAMqD,GAAuB,IAAhBxD,EAAe,uDAAR,OAC/B,EAAyBsD,KAAK5D,MAAtBnB,EAAR,EAAQA,KAAMyJ,EAAd,EAAcA,OACd,OACC,cAAC,GAAD,CACC7H,KAAMA,EACNkF,SAAU/B,KAAKyF,aACfvF,MAAOA,EACPvB,MAAO1D,EAAK4B,GACZH,KAAMA,EACNrD,MAAOqL,EAAO7H,O,0BAKjB,SAAaA,EAAMqD,EAAOoE,EAASC,EAAUzC,GAC5C,MAAyB9B,KAAK5D,MAAtBnB,EAAR,EAAQA,KAAMyJ,EAAd,EAAcA,OACd,OACC,cAAC,GAAD,CACC7H,KAAMA,EACNqD,MAAOA,EACPoE,QAASA,EACTvC,SAAU/B,KAAKyF,aACf9G,MAAO1D,EAAK4B,GACZxD,MAAOqL,EAAO7H,GACd0H,SAAUA,EACVzC,SAAUA,Q,GA/EKlG,aAqFJ6I,MClFToB,G,4MACLzJ,MAAQ,CACPnB,KAAS,CAAEiJ,MAAO,GAAI4B,QAAS,GAAIC,cAAe,GAAIC,gBAAiB,IACvElH,OAAS,GACT4F,OAAS,I,EAGVE,OAASqB,KAAIC,OAAO,CACnBhC,MAAkB+B,KAAIhC,SAASkC,WAAWjG,MAAM,SAChD4F,QAAkBG,KAAIhC,SAASkC,WAAWjG,MAAM,SAChD6F,cAAkBE,KAAIG,SACpBC,QAAQC,IAAI,GACZC,IAAI,KACJC,KAAK,CAAEzB,QAAS,qCAChB7E,MAAM,SACR8F,gBAAkBC,KAAIG,SACpBC,QAAQC,IAAI,GACZC,IAAI,IACJC,KAAK,CAAEzB,QAAS,oCAChB7E,MAAM,U,EAGTsF,S,sBAAW,oCAAAxK,EAAA,+DACiB,EAAKgB,MAAxByK,EADE,EACFA,MAAOC,EADL,EACKA,QACPzL,EAAS,EAAKmB,MAAdnB,KAER0B,EAAY,SADNA,EAAO8J,EAAME,OAAbhK,IACcA,EAAK,KAJf,kBAOHI,EAAUJ,EAAI1B,GAPX,OAQTyL,EAAQlF,KAAK,WARJ,kDAUL,KAAG7H,UAAmC,MAAvB,KAAGA,SAASE,QAC9BE,IAAMV,MAAM,gDAXJ,0D,2FAgBX,8BAAA2B,EAAA,sEACgCiC,IADhC,gBACe6B,EADf,EACS7D,KACR+E,KAAKwD,SAAS,CAAE1E,WAFjB,gD,wHAKA,sCAAA9D,EAAA,2DAC4BgF,KAAKhE,MAAxByK,EADT,EACSA,MAAOC,EADhB,EACgBA,QADhB,SAKkB,SADVjD,EAAUgD,EAAME,OAAOhK,IAJ/B,iEfxCwBA,Ee+CiB8G,Ef9ClC9I,EAAKT,IAAI4C,EAASH,IeuCzB,gBAOgBuE,EAPhB,EAOUjG,KACR+E,KAAKwD,SAAS,CAAEvI,KAAM+E,KAAK4G,eAAe1F,KAR5C,sDAUM,KAAGvH,UAAmC,MAAvB,KAAGA,SAASE,OAVjC,0CAWU6M,EAAQG,QAAQ,eAX1B,kCfxCuB,IAAClK,IewCxB,qB,4HAgBA,sBAAA3B,EAAA,sEACOgF,KAAK8G,iBADZ,uBAEO9G,KAAK+G,gBAFZ,gD,kFAKA,SAAe7F,GACd,IAAQgD,EAAiDhD,EAAjDgD,MAAOE,EAA0ClD,EAA1CkD,MAAO2B,EAAmC7E,EAAnC6E,cAAeC,EAAoB9E,EAApB8E,gBACrC,MAAO,CACN9B,QACA4B,QAAkB1B,EAAM1D,IACxBqF,gBACAC,qB,oBAIF,WACC,IAAQlH,EAAWkB,KAAK5D,MAAhB0C,OACR,OACC,gCACC,4CACA,uBAAMkI,SAAUhH,KAAKqF,aAArB,UACErF,KAAKiH,YAAY,QAAS,SAC1BjH,KAAKkH,aAAa,UAAW,QAASpI,EAAQ,MAAO,QACrDkB,KAAKiH,YAAY,gBAAiB,kBAAmB,UACrDjH,KAAKiH,YAAY,kBAAmB,OAAQ,UAC5CjH,KAAKmH,aAAa,kB,GApFA1C,IA2FToB,MC5FAuB,GAJC,WACf,OAAO,0CCGOC,GAJG,WACjB,OAAO,4CCGOC,GAJE,WAChB,OAAO,4CCGFC,G,4MACLnL,MAAQ,CACPnB,KAAS,CAAEH,MAAO,GAAIC,SAAU,IAChC2J,OAAS,I,EAGVE,OAASqB,KAAIC,OAAO,CACnBpL,MAAWmL,KAAIhC,SAASkC,WAAWjG,MAAM,SACzCnF,SAAWkL,KAAIhC,SAASkC,WAAWjG,MAAM,c,EAG1CsF,S,sBAAW,sCAAAxK,EAAA,+DACkB,EAAKoB,MAAMnB,KAA/BH,EADE,EACFA,MAAOC,EADL,EACKA,SADL,kBAIHkB,EAAKpB,MAAMC,EAAOC,GAJf,OAKDqB,EAAU,EAAKJ,MAAMM,SAArBF,MACRoL,OAAOlL,SAAWF,EAAQA,EAAMC,KAAKF,SAAW,IANvC,gDAQL,KAAGxC,UAAmC,MAAvB,KAAGA,SAASE,SACxBoB,EADwC,eAC5B,EAAKmB,MAAMnB,MACvByJ,EAFwC,eAE1B,EAAKtI,MAAMsI,QAC/BzJ,EAAKF,SAAW,GAChB2J,EAAO5J,MAAQ,KAAGnB,SAASsB,KAC3B,EAAKuI,SAAS,CAAEvI,OAAMyJ,YAbd,yD,4CAkBX,WACC,OAAIzI,EAAKT,iBAAyB,cAAC,IAAD,CAAUU,GAAG,MAG9C,gCACC,uCACA,uBAAM8K,SAAUhH,KAAKqF,aAArB,UACErF,KAAKiH,YAAY,QAAS,SAC1BjH,KAAKiH,YAAY,WAAY,WAAY,YACzCjH,KAAKmH,aAAa,mB,GAtCA1C,IA6CT8C,MC7CR,IAAME,GAAW,SAACjL,GACxB,IALgBG,EAKR7B,EAA0B0B,EAA1B1B,MAAOC,EAAmByB,EAAnBzB,SAAU8B,EAASL,EAATK,KACzB,OAAOlC,EAAKR,KALN,UAAN,OAAiBwC,GAAU,IAKC,CAAE7B,QAAOC,WAAU8B,UCF1C6K,G,4MACLtL,MAAQ,CACPnB,KAAS,CAAEH,MAAO,GAAIC,SAAU,GAAI8B,KAAM,IAC1C6H,OAAS,I,EAGVE,OAASqB,KAAIC,OAAO,CACnBpL,MAAWmL,KAAIhC,SACbnJ,MAAM,CAAE6M,kBAAmB,EAAGC,kBAAmB,EAAGC,KAAM,CAAEC,MAAO,CAAE,MAAO,MAAO,SACnF3B,WACAjG,MAAM,SACRnF,SAAWkL,KAAIhC,SACb8D,QAAQ,8EACRhD,QACA,6IAEAoB,WACAjG,MAAM,YACRrD,KAAWoJ,KAAIhC,SAASkC,WAAWjG,MAAM,U,EAG1CsF,S,sBAAW,oCAAAxK,EAAA,6DACFC,EAAS,EAAKmB,MAAdnB,KADE,kBAIiB+M,GAAqB/M,GAJtC,gBAIDT,EAJC,EAIDA,QACFD,EAAMC,EAAQ,gBACpByB,EAAKZ,aAAad,GAClBiN,OAAOlL,SAAW,IAPT,kDASL,KAAG3C,UAAmC,MAAvB,KAAGA,SAASE,UACxB6K,EADwC,eAC1B,EAAKtI,MAAMsI,SACxB5J,MAAQ,KAAGnB,SAASsB,KAC3B,EAAKuI,SAAS,CAAEkB,YAZR,0D,4CAiBX,WACC,OACC,gCACC,0CACA,uBAAMsC,SAAUhH,KAAKqF,aAArB,UACErF,KAAKiH,YAAY,QAAS,SAC1BjH,KAAKiH,YAAY,WAAY,WAAY,YACzCjH,KAAKiH,YAAY,OAAQ,QACzBjH,KAAKmH,aAAa,sB,GA9CG1C,IAqDZiD,MCxDTO,G,uKACL,WACChM,EAAKX,SACLkM,OAAOlL,SAAW,M,oBAGnB,WACC,OAAO,S,GAPYV,aAWNqM,MCGTC,I,0NACL9L,MAAQ,G,uDAER,WACC,IAAMI,EAAOP,EAAKT,iBAClBwE,KAAKwD,SAAS,CAAEhH,W,oBAGjB,WACC,IAAQA,EAASwD,KAAK5D,MAAdI,KACR,OACC,eAAC,IAAMI,SAAP,WACC,cAAC,IAAD,IACA,cAAC,EAAD,CAAQJ,KAAMA,IACd,sBAAMC,UAAU,YAAhB,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAO8C,KAAK,SAASzD,OAAQ,SAACE,GAAD,OAAW,cAAC,GAAD,eAAeA,OACvD,cAAC,IAAD,CAAOuD,KAAK,UAAU1D,UAAWoM,KACjC,cAAC,IAAD,CAAO1I,KAAK,YAAYzD,OAAQ,SAACE,GAAD,OAAW,cAAC,GAAD,eAAkBA,OAC7D,cAAC,EAAD,CAAgBuD,KAAK,cAAc1D,UAAWgK,KAC9C,cAAC,IAAD,CAAOtG,KAAK,UAAU4I,OAAK,EAACrM,OAAQ,SAACE,GAAD,OAAW,cAAC,GAAD,2BAAYA,GAAZ,IAAmBQ,KAAMA,QACxE,cAAC,IAAD,CAAO+C,KAAK,aAAa1D,UAAWwL,KACpC,cAAC,IAAD,CAAO9H,KAAK,WAAW1D,UAAWuL,KAClC,cAAC,IAAD,CAAO7H,KAAK,aAAa1D,UAAWyL,KACpC,cAAC,IAAD,CAAUjL,KAAK,IAAI8L,OAAK,EAACjM,GAAG,YAC5B,cAAC,IAAD,CAAUA,GAAG,2B,GAzBDN,cAiCHsM,MCtCAE,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,cCGdvO,EAAOjB,OAEPgQ,IAAS/M,OACR,cAAC,IAAMgN,WAAP,UACC,cAAC,IAAD,UACC,cAAC,GAAD,QAGFC,SAASC,eAAe,SAMzBZ,M","file":"static/js/main.382cb5d2.chunk.js","sourcesContent":["import * as Sentry from '@sentry/react';\r\nimport { Integrations } from '@sentry/tracing';\r\n\r\nfunction init() {\r\n\tSentry.init({\r\n\t\tdsn              : 'https://80d836676907418d9afd5d507d5dd728@o1054113.ingest.sentry.io/6039258',\r\n\t\tintegrations     : [ new Integrations.BrowserTracing() ],\r\n\r\n\t\t// Set tracesSampleRate to 1.0 to capture 100%\r\n\t\t// of transactions for performance monitoring.\r\n\t\t// We recommend adjusting this value in production\r\n\t\ttracesSampleRate : 1.0\r\n\t});\r\n}\r\n\r\nfunction log(error) {\r\n\tSentry.captureException(error);\r\n}\r\n\r\nexport default {\r\n\tinit,\r\n\tlog\r\n};\r\n","import axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport logger from './logService';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL;\r\n\r\naxios.interceptors.response.use(null, (error) => {\r\n\tconst expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\r\n\r\n\tif (!expectedError) {\r\n\t\tlogger.log(error);\r\n\t\ttoast.error('An unexpected error occurred.');\r\n\t}\r\n\r\n\treturn Promise.reject(error); //this will be passed to catch block\r\n});\r\n\r\nconst setJwt = (jwt) => {\r\n\taxios.defaults.headers.common['x-auth-token'] = jwt;\r\n};\r\n\r\nexport default {\r\n\tget    : axios.get,\r\n\tpost   : axios.post,\r\n\tput    : axios.put,\r\n\tdelete : axios.delete,\r\n\tsetJwt\r\n};\r\n","import jwtDecode from 'jwt-decode';\r\nimport http from './httpService';\r\n\r\nconst apiEndpoint = '/auth';\r\n\r\nconst tokenKey = 'token';\r\n\r\nhttp.setJwt(getJwt());\r\n\r\nexport const login = async (email, password) => {\r\n\tconst { data: jwt } = await http.post(apiEndpoint, { email, password });\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n};\r\n\r\nexport const loginWithJwt = (jwt) => {\r\n\tlocalStorage.setItem(tokenKey, jwt);\r\n};\r\n\r\nexport const logout = () => {\r\n\tlocalStorage.removeItem(tokenKey);\r\n};\r\n\r\nexport const getCurrentUser = () => {\r\n\ttry {\r\n\t\tconst jwt = localStorage.getItem(tokenKey);\r\n\t\treturn jwtDecode(jwt);\r\n\t} catch (ex) {\r\n\t\treturn null;\r\n\t}\r\n};\r\n\r\nexport function getJwt() {\r\n\treturn localStorage.getItem(tokenKey);\r\n}\r\n\r\nexport default {\r\n\tlogin,\r\n\tloginWithJwt,\r\n\tlogout,\r\n\tgetCurrentUser,\r\n\tgetJwt\r\n};\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport auth from '../../services/authService';\r\n\r\nconst ProtectedRoute = ({ component: Component, render, ...rest }) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={(props) => {\r\n\t\t\t\tif (!auth.getCurrentUser())\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname : '/login',\r\n\t\t\t\t\t\t\t\tstate    : { from: props.location }\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\treturn Component ? <Component {...props} /> : render(props);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\n\r\nconst NavBar = ({ user }) => {\r\n\treturn (\r\n\t\t<nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n\t\t\t<div className=\"container-fluid\">\r\n\t\t\t\t<Link className=\"navbar-brand\" to=\"/\">\r\n\t\t\t\t\tVidly\r\n\t\t\t\t</Link>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"navbar-toggler\"\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tdata-bs-toggle=\"collapse\"\r\n\t\t\t\t\tdata-bs-target=\"#navbarNav\"\r\n\t\t\t\t\taria-controls=\"navbarNav\"\r\n\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\taria-label=\"Toggle navigation\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"navbar-toggler-icon\" />\r\n\t\t\t\t</button>\r\n\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n\t\t\t\t\t<ul className=\"navbar-nav\">\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<NavLink className=\"nav-link\" aria-current=\"page\" to=\"/movies\">\r\n\t\t\t\t\t\t\t\tMovies\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/customers\">\r\n\t\t\t\t\t\t\t\tCustomers\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/rentals\">\r\n\t\t\t\t\t\t\t\tRentals\r\n\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t{!user && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/login\">\r\n\t\t\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/register\">\r\n\t\t\t\t\t\t\t\t\t\tRegister\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{user && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/profile\">\r\n\t\t\t\t\t\t\t\t\t\t{user.name}\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li className=\"nav-item\">\r\n\t\t\t\t\t\t\t\t\t<NavLink className=\"nav-link\" to=\"/logout\">\r\n\t\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default NavBar;\r\n","import http from './httpService';\r\n\r\nfunction movieUrl(id) {\r\n\treturn `/movies/${id ? id : ''}`;\r\n}\r\n\r\nexport const getMovies = () => {\r\n\treturn http.get(movieUrl());\r\n};\r\n\r\nexport const getMovie = (id) => {\r\n\treturn http.get(movieUrl(id));\r\n};\r\n\r\nexport const saveMovie = (id, data) => {\r\n\tif (id) {\r\n\t\treturn http.put(movieUrl(id), data);\r\n\t}\r\n\treturn http.post(movieUrl(), data);\r\n};\r\n\r\nexport const deleteMovie = (id) => {\r\n\treturn http.delete(movieUrl(id));\r\n};\r\n","import http from './httpService';\r\n\r\nconst apiEndpoint = '/genres';\r\n\r\nexport const getGenres = () => {\r\n\treturn http.get(apiEndpoint);\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nconst Pagination = (props) => {\r\n\tlet styles = { cursor: 'pointer' };\r\n\r\n\tconst { itemsCount, pageSize, currentPage, onPageChange } = props;\r\n\r\n\tlet pagesCount = itemsCount / pageSize;\r\n\tconst pages = _.range(1, pagesCount + 1);\r\n\tconst pageList = pages.map((page) => (\r\n\t\t<li key={page} className={page === currentPage ? 'page-item active' : 'page-item'}>\r\n\t\t\t<button className=\"page-link\" style={styles} onClick={() => onPageChange(page)} href=\"#\">\r\n\t\t\t\t{page}\r\n\t\t\t</button>\r\n\t\t</li>\r\n\t));\r\n\r\n\tconst firstPageNumber = 1;\r\n\tconst lastPageNumber = pages[pages.length - 1];\r\n\r\n\treturn (\r\n\t\t<nav aria-label=\"Page navigation\" className=\"d-flex justify-content-center\">\r\n\t\t\t<ul className=\"pagination\">\r\n\t\t\t\t<li className=\"page-item\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"page-link\"\r\n\t\t\t\t\t\tstyle={styles}\r\n\t\t\t\t\t\tonClick={() => onPageChange(firstPageNumber)}\r\n\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\taria-label=\"Previous\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span aria-hidden=\"true\">&laquo;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t\t{pageList}\r\n\t\t\t\t<li className=\"page-item\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"page-link\"\r\n\t\t\t\t\t\tstyle={styles}\r\n\t\t\t\t\t\tonClick={() => onPageChange(lastPageNumber)}\r\n\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\taria-label=\"Next\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span aria-hidden=\"true\">&raquo;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nPagination.propTypes = {\r\n\titemsCount   : PropTypes.number.isRequired,\r\n\tpageSize     : PropTypes.number.isRequired,\r\n\tcurrentPage  : PropTypes.number.isRequired,\r\n\tonPageChange : PropTypes.func.isRequired\r\n};\r\n\r\nexport default Pagination;\r\n","import _ from 'lodash';\r\n\r\nexport function paginate(items, pageNumber, pageSize) {\r\n\tconst startIndex = (pageNumber - 1) * pageSize;\r\n\treturn _(items).slice(startIndex).take(pageSize).value();\r\n}\r\n\r\n// My paginate function without npm lodash\r\n// export function paginate(items, pageNumber, pageSize) {\r\n// \tlet startIndex = (pageNumber - 1) * pageSize;\r\n// \tlet endIndex = pageNumber * pageSize;\r\n// \tif (pageNumber * pageSize >= items.length) {\r\n// \t\tendIndex = undefined;\r\n// \t}\r\n// \treturn items.slice(startIndex, endIndex);\r\n// }\r\n","import React from 'react';\r\nimport './ListGroup.css';\r\n\r\nconst ListGroup = (props) => {\r\n\tconst { genres: allGenres, onItemSelect, selectedItem, textProperty, valueProperty } = props;\r\n\tlet styles = { cursor: 'pointer' };\r\n\tconst genres = allGenres.map((g) => (\r\n\t\t<li\r\n\t\t\tkey={g[valueProperty]}\r\n\t\t\tonClick={() => onItemSelect(g[valueProperty])}\r\n\t\t\tstyle={styles}\r\n\t\t\tclassName={`list-group-item ${selectedItem === g[valueProperty] ? 'active' : ''}`}\r\n\t\t>\r\n\t\t\t{g[textProperty]}\r\n\t\t</li>\r\n\t));\r\n\treturn <ul className=\"list-group\">{genres}</ul>;\r\n};\r\n\r\nListGroup.defaultProps = {\r\n\ttextProperty  : 'name',\r\n\tvalueProperty : '_id'\r\n};\r\n\r\nexport default ListGroup;\r\n","import React, { Component } from 'react';\r\n\r\nclass TableHeader extends Component {\r\n\traiseSort = (path) => {\r\n\t\tif (path) {\r\n\t\t\tconst { sortingValue: currentSortingValue, onMovieSort } = this.props;\r\n\t\t\tlet order = 'asc';\r\n\t\t\tif (currentSortingValue.path === path) {\r\n\t\t\t\torder = currentSortingValue.order === 'asc' ? 'desc' : 'asc';\r\n\t\t\t}\r\n\t\t\tonMovieSort({ path, order });\r\n\t\t}\r\n\t};\r\n\r\n\traiseSortIcon = (column) => {\r\n\t\tconst { sortingValue } = this.props;\r\n\t\tif (!column.path || column.path !== sortingValue.path) return null;\r\n\t\tlet classes = sortingValue.order === 'asc' ? 'fa fa-sort-asc' : 'fa fa-sort-desc';\r\n\t\treturn <i className={classes} aria-hidden=\"true\" />;\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { columns } = this.props;\r\n\t\tconst styles = { cursor: 'pointer' };\r\n\t\tconst tableHeaders = columns.map((column) => (\r\n\t\t\t<th\r\n\t\t\t\tkey={column.label || column.key}\r\n\t\t\t\tstyle={column.label ? styles : {}}\r\n\t\t\t\tonClick={() => this.raiseSort(column.path)}\r\n\t\t\t\tscope=\"col\"\r\n\t\t\t>\r\n\t\t\t\t{column.label} {this.raiseSortIcon(column)}\r\n\t\t\t</th>\r\n\t\t));\r\n\r\n\t\treturn (\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th key=\"Numth\" scope=\"col\">\r\n\t\t\t\t\t\t#\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t{tableHeaders}\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TableHeader;\r\n","import React, { Component } from 'react';\r\nimport _ from 'lodash';\r\n\r\nclass TableBody extends Component {\r\n\trenderCell = (item, column) => {\r\n\t\tif (column.content) return <td key={column.path || column.key}>{column.content(item)}</td>;\r\n\t\treturn <td key={column.path}>{_.get(item, column.path)}</td>;\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { data, columns } = this.props;\r\n\t\treturn (\r\n\t\t\t<tbody>\r\n\t\t\t\t{data.map((item, index) => (\r\n\t\t\t\t\t<tr key={item._id}>\r\n\t\t\t\t\t\t<th key=\"numth\" scope=\"row\">\r\n\t\t\t\t\t\t\t{index + 1}\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t{columns.map((column) => {\r\n\t\t\t\t\t\t\treturn this.renderCell(item, column);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t))}\r\n\t\t\t</tbody>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TableBody;\r\n","import React from 'react';\r\nimport TableHeader from './TableHeader';\r\nimport TableBody from './TableBody';\r\n\r\nconst Table = ({ columns, sortingValue, onMovieSort, movies }) => {\r\n\treturn (\r\n\t\t<table className=\"table\">\r\n\t\t\t<TableHeader columns={columns} sortingValue={sortingValue} onMovieSort={onMovieSort} />\r\n\t\t\t<TableBody data={movies} columns={columns} />\r\n\t\t</table>\r\n\t);\r\n};\r\n\r\nexport default Table;\r\n","import React from 'react';\r\n\r\nconst Like = ({ id, userLikes, onMovieLike }) => {\r\n\tlet classes = 'fa fa-heart';\r\n\tif (!userLikes.includes(id)) {\r\n\t\tclasses += '-o';\r\n\t}\r\n\r\n\tlet styles = { cursor: 'pointer' };\r\n\r\n\treturn <i className={classes} onClick={() => onMovieLike(id)} style={styles} aria-hidden=\"true\" />;\r\n};\r\n\r\nexport default Like;\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Table from './common/Table';\r\nimport Like from './common/Like';\r\nimport auth from '../services/authService';\r\n\r\nclass MoviesTable extends Component {\r\n\tcolumns = [\r\n\t\t{ path: 'title', label: 'Title' },\r\n\t\t{ path: 'genre.name', label: 'Genre' },\r\n\t\t{ path: 'numberInStock', label: 'Stock' },\r\n\t\t{ path: 'dailyRentalRate', label: 'Rate' },\r\n\t\t{\r\n\t\t\tkey     : 'like',\r\n\t\t\tcontent : (movie) => (\r\n\t\t\t\t<Like userLikes={this.props.currentUser.likes} onMovieLike={this.props.onMovieLike} id={movie._id} />\r\n\t\t\t)\r\n\t\t}\r\n\t];\r\n\r\n\tdeleteColumn = {\r\n\t\tkey     : 'delete',\r\n\t\tcontent : (movie) => (\r\n\t\t\t<button onClick={() => this.props.onMovieDelete(movie._id)} className=\"btn btn-danger btn-sm\">\r\n\t\t\t\tDelete\r\n\t\t\t</button>\r\n\t\t)\r\n\t};\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst user = auth.getCurrentUser();\r\n\t\tif (user && user.isAdmin) {\r\n\t\t\tthis.columns.push(this.deleteColumn);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { movies, onMovieSort, sortingValue } = this.props;\r\n\t\treturn <Table movies={movies} columns={this.columns} sortingValue={sortingValue} onMovieSort={onMovieSort} />;\r\n\t}\r\n}\r\n\r\nexport default MoviesTable;\r\n","import React from 'react';\r\n\r\nconst Input = ({ name, label, error, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"mb-3\">\r\n\t\t\t<label htmlFor={name} className=\"form-label\">\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<input {...rest} autoFocus={name === 'username'} id={name} name={name} className=\"form-control\" />\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Input;\r\n","import React, { Component } from 'react';\r\nimport Input from './Input';\r\n\r\nclass SearchForm extends Component {\r\n\trender() {\r\n\t\tconst { data, labelKey, value, onChange } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"mb-3\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tonChange(e.currentTarget.value);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\tlist=\"datalistOptions\"\r\n\t\t\t\t\tid=\"exampleDataList\"\r\n\t\t\t\t\tplaceholder=\"Type to search...\"\r\n\t\t\t\t/>\r\n\t\t\t\t<datalist id=\"datalistOptions\">{data.map((d) => <option key={d._id} value={d[labelKey]} />)}</datalist>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchForm;\r\n","import React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { Link } from 'react-router-dom';\r\nimport { getMovies, deleteMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\nimport Pagination from '../components/common/Pagination';\r\nimport { paginate } from '../utils/paginate';\r\nimport ListGroup from '../components/ListGroup';\r\nimport MoviesTable from '../components/MoviesTable';\r\nimport SearchForm from '../components/common/SearchForm';\r\nimport _ from 'lodash';\r\n\r\nclass Movies extends Component {\r\n\tstate = {\r\n\t\tmovies          : [],\r\n\t\tgenres          : [],\r\n\t\tcurrentUser     : { likes: [] },\r\n\t\tpageSize        : 3,\r\n\t\tcurrentPage     : 1,\r\n\t\tselectedGenreId : '',\r\n\t\tsortingValue    : { path: 'title', order: 'asc' },\r\n\t\tsearchQuery     : ''\r\n\t};\r\n\r\n\tgetPagedData = () => {\r\n\t\tconst { movies: allMovies, pageSize, currentPage, selectedGenreId, sortingValue, searchQuery } = this.state;\r\n\t\tlet filteredMovies = this.filterMoviesByGenre(allMovies, selectedGenreId);\r\n\t\tif (searchQuery) {\r\n\t\t\tfilteredMovies = this.filterMovieBySearch(allMovies, searchQuery);\r\n\t\t}\r\n\t\tconst sortedMovies = _.orderBy(filteredMovies, [ sortingValue.path ], [ sortingValue.order ]);\r\n\t\tconst movies = paginate(sortedMovies, currentPage, pageSize);\r\n\t\tconst { length: totalCount } = sortedMovies;\r\n\t\treturn { totalCount, data: movies };\r\n\t};\r\n\r\n\tview = () => {\r\n\t\tconst { movies, currentUser, pageSize, currentPage, sortingValue, searchQuery } = this.state;\r\n\t\tconst { totalCount, data } = this.getPagedData();\r\n\t\tconst { user } = this.props;\r\n\r\n\t\tlet text = 'There are no movies';\r\n\t\tlet table = null;\r\n\r\n\t\tif (totalCount !== 0) {\r\n\t\t\ttext = `Showing ${totalCount} movies`;\r\n\t\t\ttable = (\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<MoviesTable\r\n\t\t\t\t\t\tmovies={data}\r\n\t\t\t\t\t\tcurrentUser={currentUser}\r\n\t\t\t\t\t\tonMovieDelete={this.handleDelete}\r\n\t\t\t\t\t\tonMovieLike={this.handleLike}\r\n\t\t\t\t\t\tonMovieSort={this.handleSort}\r\n\t\t\t\t\t\tsortingValue={sortingValue}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\titemsCount={totalCount}\r\n\t\t\t\t\t\tpageSize={pageSize}\r\n\t\t\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\t\t\tonPageChange={this.handlePageChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t{user && (\r\n\t\t\t\t\t<Link to=\"/movies/new\" className=\"btn btn-primary mb-3\">\r\n\t\t\t\t\t\tNew Movie\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t)}\r\n\t\t\t\t<p className=\"mb-3 text-muted\">{text}</p>\r\n\t\t\t\t<SearchForm data={movies} value={searchQuery} labelKey=\"title\" onChange={this.handleSearchChange} />\r\n\t\t\t\t{table}\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t};\r\n\r\n\thandlePageChange = (page) => {\r\n\t\tthis.setState({\r\n\t\t\tcurrentPage : page\r\n\t\t});\r\n\t};\r\n\r\n\thandleLike = (movieId) => {\r\n\t\tlet currentUser = { ...this.state.currentUser };\r\n\t\tif (currentUser.likes.includes(movieId)) {\r\n\t\t\tlet spliceIndex = currentUser.likes.indexOf(movieId);\r\n\t\t\tcurrentUser.likes.splice(spliceIndex, 1);\r\n\t\t} else {\r\n\t\t\tcurrentUser.likes.push(movieId);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\t...this.state,\r\n\t\t\tcurrentUser\r\n\t\t});\r\n\t};\r\n\r\n\thandleDelete = async (id) => {\r\n\t\tconst originalMovies = this.state.movies;\r\n\r\n\t\tconst movies = originalMovies.filter((m) => m._id !== id);\r\n\t\tthis.setState({ movies });\r\n\r\n\t\ttry {\r\n\t\t\tawait deleteMovie(id);\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 404) {\r\n\t\t\t\ttoast.error('This movie has already been deleted.');\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({ movies: originalMovies });\r\n\t\t}\r\n\t};\r\n\r\n\thandleGenreSelect = (selectedGenreId = '') => {\r\n\t\tthis.setState({\r\n\t\t\tselectedGenreId,\r\n\t\t\tsearchQuery     : '',\r\n\t\t\tcurrentPage     : 1\r\n\t\t});\r\n\t};\r\n\r\n\thandleSearchChange = (searchQuery = '') => {\r\n\t\tthis.setState({\r\n\t\t\tsearchQuery,\r\n\t\t\tselectedGenreId : '',\r\n\t\t\tcurrentPage     : 1\r\n\t\t});\r\n\t};\r\n\r\n\thandleSort = (sortingValue) => {\r\n\t\tthis.setState({ sortingValue });\r\n\t};\r\n\r\n\tasync componentDidMount() {\r\n\t\tconst { data: movies } = await getMovies();\r\n\t\tconst { data: genres } = await getGenres();\r\n\t\tthis.setState({\r\n\t\t\tmovies,\r\n\t\t\tgenres : [ { _id: '', name: 'All Genres' }, ...genres ]\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tconst { movies: allMovies, currentPage, pageSize, selectedGenreId, searchQuery } = this.state;\r\n\t\tlet filteredMovies = this.filterMoviesByGenre(allMovies, selectedGenreId);\r\n\t\tif (searchQuery) {\r\n\t\t\tfilteredMovies = this.filterMovieBySearch(allMovies, searchQuery);\r\n\t\t}\r\n\t\tconst { length: totalCount } = filteredMovies;\r\n\t\tif ((currentPage - 1) * pageSize + 1 > totalCount && currentPage > 1) {\r\n\t\t\tthis.handlePageChange(currentPage - 1);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { genres, selectedGenreId } = this.state;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<h2 className=\"my-5 text-center\">Movie List</h2>\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-4 col-md-3\">\r\n\t\t\t\t\t\t<ListGroup\r\n\t\t\t\t\t\t\tgenres={genres}\r\n\t\t\t\t\t\t\tonItemSelect={this.handleGenreSelect}\r\n\t\t\t\t\t\t\tselectedItem={selectedGenreId}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"col\">{this.view()}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\tfilterMovieBySearch = (allMovies, string) => {\r\n\t\tif (string) {\r\n\t\t\treturn allMovies.filter((m) => m.title.toLowerCase().includes(string.toLowerCase()));\r\n\t\t}\r\n\t\treturn allMovies;\r\n\t};\r\n\r\n\tfilterMoviesByGenre = (allMovies, selectedGenreId) => {\r\n\t\tif (selectedGenreId) {\r\n\t\t\treturn allMovies.filter((m) => m.genre._id === selectedGenreId);\r\n\t\t}\r\n\t\treturn allMovies;\r\n\t};\r\n}\r\n\r\nexport default Movies;\r\n","import React from 'react';\r\n\r\nconst Select = ({ name, label, options, error, valueKey, labelKey, ...rest }) => {\r\n\treturn (\r\n\t\t<div className=\"mb-3\">\r\n\t\t\t<label htmlFor={name} className=\"form-label\">\r\n\t\t\t\t{label}\r\n\t\t\t</label>\r\n\t\t\t<select {...rest} name={name} id={name} className=\"form-select\" aria-label=\"Select Input\">\r\n\t\t\t\t<option key=\"select-label\" value=\"\">{`Select ${label}`}</option>\r\n\t\t\t\t{options.map((o) => (\r\n\t\t\t\t\t<option key={o[valueKey]} value={o[valueKey]}>\r\n\t\t\t\t\t\t{o[labelKey]}\r\n\t\t\t\t\t</option>\r\n\t\t\t\t))}\r\n\t\t\t</select>\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Select;\r\n","import React, { Component } from 'react';\r\nimport Input from './Input';\r\nimport Select from './Select';\r\n\r\nclass Form extends Component {\r\n\tstate = {\r\n\t\tdata   : {},\r\n\t\terrors : {}\r\n\t};\r\n\r\n\tvalidate = () => {\r\n\t\tconst { data } = this.state;\r\n\t\tconst options = { abortEarly: false };\r\n\t\tconst { error } = this.schema.validate(data, options);\r\n\t\tif (!error) return null;\r\n\r\n\t\tconst errors = {};\r\n\t\tfor (let item of error.details) {\r\n\t\t\terrors[item.path[0]] = item.message;\r\n\t\t}\r\n\t\treturn errors;\r\n\t};\r\n\r\n\tvalidateProperty = ({ name, value }) => {\r\n\t\tconst { schema } = this.schema.$_terms.keys.find((k) => k.key === name);\r\n\t\tconst { error } = schema.validate(value);\r\n\t\treturn error ? error.details[0].message : null;\r\n\t};\r\n\r\n\thandleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst errors = this.validate();\r\n\t\tthis.setState({ errors: errors || {} });\r\n\t\tif (errors) return;\r\n\r\n\t\tthis.doSubmit();\r\n\t};\r\n\r\n\thandleChange = ({ currentTarget: input }) => {\r\n\t\tconst errors = { ...this.state };\r\n\t\tconst errorMessage = this.validateProperty(input);\r\n\t\tif (errorMessage) errors[input.name] = errorMessage;\r\n\t\telse delete errors[input.name];\r\n\r\n\t\tconst data = { ...this.state.data };\r\n\t\tdata[input.name] = input.value;\r\n\r\n\t\tthis.setState({ data, errors });\r\n\t};\r\n\r\n\trenderButton(label) {\r\n\t\treturn (\r\n\t\t\t<button disabled={this.validate()} className=\"btn btn-primary\">\r\n\t\t\t\t{label}\r\n\t\t\t</button>\r\n\t\t);\r\n\t}\r\n\r\n\trenderInput(name, label, type = 'text') {\r\n\t\tconst { data, errors } = this.state;\r\n\t\treturn (\r\n\t\t\t<Input\r\n\t\t\t\tname={name}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\tvalue={data[name]}\r\n\t\t\t\ttype={type}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderSelect(name, label, options, valueKey, labelKey) {\r\n\t\tconst { data, errors } = this.state;\r\n\t\treturn (\r\n\t\t\t<Select\r\n\t\t\t\tname={name}\r\n\t\t\t\tlabel={label}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\tvalue={data[name]}\r\n\t\t\t\terror={errors[name]}\r\n\t\t\t\tvalueKey={valueKey}\r\n\t\t\t\tlabelKey={labelKey}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Form;\r\n","import React from 'react';\r\nimport Joi from 'joi';\r\nimport { toast } from 'react-toastify';\r\nimport Form from './common/Form';\r\nimport { getMovie, saveMovie } from '../services/movieService';\r\nimport { getGenres } from '../services/genreService';\r\n\r\nclass MovieForm extends Form {\r\n\tstate = {\r\n\t\tdata   : { title: '', genreId: '', numberInStock: '', dailyRentalRate: '' },\r\n\t\tgenres : [],\r\n\t\terrors : {}\r\n\t};\r\n\r\n\tschema = Joi.object({\r\n\t\ttitle           : Joi.string().required().label('Title'),\r\n\t\tgenreId         : Joi.string().required().label('Genre'),\r\n\t\tnumberInStock   : Joi.number()\r\n\t\t\t.ruleset.min(1)\r\n\t\t\t.max(100)\r\n\t\t\t.rule({ message: 'Number must be between 1 and 100' })\r\n\t\t\t.label('Stock'),\r\n\t\tdailyRentalRate : Joi.number()\r\n\t\t\t.ruleset.min(0)\r\n\t\t\t.max(10)\r\n\t\t\t.rule({ message: 'Number must be between 0 and 10' })\r\n\t\t\t.label('Rate')\r\n\t});\r\n\r\n\tdoSubmit = async () => {\r\n\t\tconst { match, history } = this.props;\r\n\t\tconst { data } = this.state;\r\n\t\tlet { id } = match.params;\r\n\t\tid = id !== 'new' ? id : null;\r\n\t\t// Call the server\r\n\t\ttry {\r\n\t\t\tawait saveMovie(id, data);\r\n\t\t\thistory.push('/movies');\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\ttoast.error('Please login first to do this kind of stuff.');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tasync populateGenres() {\r\n\t\tconst { data: genres } = await getGenres();\r\n\t\tthis.setState({ genres });\r\n\t}\r\n\r\n\tasync populateMovie() {\r\n\t\tconst { match, history } = this.props;\r\n\r\n\t\ttry {\r\n\t\t\tconst movieId = match.params.id;\r\n\t\t\tif (movieId === 'new') return;\r\n\r\n\t\t\tconst { data: movie } = await getMovie(movieId);\r\n\t\t\tthis.setState({ data: this.mapToViewModel(movie) });\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 404) {\r\n\t\t\t\treturn history.replace('/not-found');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync componentDidMount() {\r\n\t\tawait this.populateGenres();\r\n\t\tawait this.populateMovie();\r\n\t}\r\n\r\n\tmapToViewModel(movie) {\r\n\t\tconst { title, genre, numberInStock, dailyRentalRate } = movie;\r\n\t\treturn {\r\n\t\t\ttitle,\r\n\t\t\tgenreId         : genre._id,\r\n\t\t\tnumberInStock,\r\n\t\t\tdailyRentalRate\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { genres } = this.state;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Movie Form</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('title', 'Title')}\r\n\t\t\t\t\t{this.renderSelect('genreId', 'Genre', genres, '_id', 'name')}\r\n\t\t\t\t\t{this.renderInput('numberInStock', 'Number In Stock', 'number')}\r\n\t\t\t\t\t{this.renderInput('dailyRentalRate', 'Rate', 'number')}\r\n\t\t\t\t\t{this.renderButton('Save')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MovieForm;\r\n","import React from 'react';\r\n\r\nconst Rentals = () => {\r\n\treturn <h1>Rentals</h1>;\r\n};\r\n\r\nexport default Rentals;\r\n","import React from 'react';\r\n\r\nconst Customers = () => {\r\n\treturn <h1>Customers</h1>;\r\n};\r\n\r\nexport default Customers;\r\n","import React from 'react';\r\n\r\nconst NotFound = () => {\r\n\treturn <h1>Not Found</h1>;\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Joi from 'joi';\r\nimport auth from '../services/authService';\r\nimport Form from './common/Form';\r\n\r\nclass LoginForm extends Form {\r\n\tstate = {\r\n\t\tdata   : { email: '', password: '' },\r\n\t\terrors : {}\r\n\t};\r\n\r\n\tschema = Joi.object({\r\n\t\temail    : Joi.string().required().label('Email'),\r\n\t\tpassword : Joi.string().required().label('Password')\r\n\t});\r\n\r\n\tdoSubmit = async () => {\r\n\t\tconst { email, password } = this.state.data;\r\n\t\t// Call the server\r\n\t\ttry {\r\n\t\t\tawait auth.login(email, password);\r\n\t\t\tconst { state } = this.props.location;\r\n\t\t\twindow.location = state ? state.from.pathname : '/';\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst data = { ...this.state.data };\r\n\t\t\t\tconst errors = { ...this.state.errors };\r\n\t\t\t\tdata.password = '';\r\n\t\t\t\terrors.email = ex.response.data;\r\n\t\t\t\tthis.setState({ data, errors });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tif (auth.getCurrentUser()) return <Redirect to=\"/\" />;\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('email', 'Email')}\r\n\t\t\t\t\t{this.renderInput('password', 'Password', 'password')}\r\n\t\t\t\t\t{this.renderButton('Login')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default LoginForm;\r\n","import http from './httpService';\r\n\r\nfunction userUrl(id) {\r\n\treturn `/users/${id ? id : ''}`;\r\n}\r\n\r\nexport const register = (user) => {\r\n\tconst { email, password, name } = user;\r\n\treturn http.post(userUrl(), { email, password, name });\r\n};\r\n","import React from 'react';\r\nimport Form from './common/Form';\r\nimport Joi from 'joi';\r\nimport * as userService from '../services/userService';\r\nimport auth from '../services/authService';\r\n\r\nclass RegisterForm extends Form {\r\n\tstate = {\r\n\t\tdata   : { email: '', password: '', name: '' },\r\n\t\terrors : {}\r\n\t};\r\n\r\n\tschema = Joi.object({\r\n\t\temail    : Joi.string()\r\n\t\t\t.email({ minDomainSegments: 2, maxDomainSegments: 3, tlds: { allow: [ 'com', 'net', 'vn' ] } })\r\n\t\t\t.required()\r\n\t\t\t.label('Email'),\r\n\t\tpassword : Joi.string()\r\n\t\t\t.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&.,])[A-Za-z\\d@$!%*?&.,]{8,16}$/)\r\n\t\t\t.message(\r\n\t\t\t\t'Minimum 8 and maximun 16 characters, at least one uppercase letter, one lowercase letter, one number and one special character(@$!%*?&.,)'\r\n\t\t\t)\r\n\t\t\t.required()\r\n\t\t\t.label('Password'),\r\n\t\tname     : Joi.string().required().label('Name')\r\n\t});\r\n\r\n\tdoSubmit = async () => {\r\n\t\tconst { data } = this.state;\r\n\t\t// Call the server\r\n\t\ttry {\r\n\t\t\tconst { headers } = await userService.register(data);\r\n\t\t\tconst jwt = headers['x-auth-token'];\r\n\t\t\tauth.loginWithJwt(jwt);\r\n\t\t\twindow.location = '/';\r\n\t\t} catch (ex) {\r\n\t\t\tif (ex.response && ex.response.status === 400) {\r\n\t\t\t\tconst errors = { ...this.state.errors };\r\n\t\t\t\terrors.email = ex.response.data;\r\n\t\t\t\tthis.setState({ errors });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t<form onSubmit={this.handleSubmit}>\r\n\t\t\t\t\t{this.renderInput('email', 'Email')}\r\n\t\t\t\t\t{this.renderInput('password', 'Password', 'password')}\r\n\t\t\t\t\t{this.renderInput('name', 'Name')}\r\n\t\t\t\t\t{this.renderButton('Register')}\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default RegisterForm;\r\n","import React, { Component } from 'react';\r\nimport auth from '../services/authService';\r\n\r\nclass Logout extends Component {\r\n\tcomponentDidMount() {\r\n\t\tauth.logout();\r\n\t\twindow.location = '/';\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport default Logout;\r\n","import React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router';\nimport { ToastContainer } from 'react-toastify';\nimport ProtectedRoute from './components/common/ProtectedRoute';\nimport NavBar from './components/NavBar';\nimport Movies from './containers/Movies';\nimport MovieForm from './components/MovieForm';\nimport Rentals from './components/Rentals';\nimport Customers from './components/Customers';\nimport NotFound from './components/NotFound';\nimport LoginForm from './components/LoginForm';\nimport RegisterForm from './components/RegisterForm';\nimport Logout from './components/Logout';\nimport auth from './services/authService';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\n\nclass App extends Component {\n\tstate = {};\n\n\tcomponentDidMount() {\n\t\tconst user = auth.getCurrentUser();\n\t\tthis.setState({ user });\n\t}\n\n\trender() {\n\t\tconst { user } = this.state;\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ToastContainer />\n\t\t\t\t<NavBar user={user} />\n\t\t\t\t<main className=\"container\">\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t<Route path=\"/login\" render={(props) => <LoginForm {...props} />} />\n\t\t\t\t\t\t<Route path=\"/logout\" component={Logout} />\n\t\t\t\t\t\t<Route path=\"/register\" render={(props) => <RegisterForm {...props} />} />\n\t\t\t\t\t\t<ProtectedRoute path=\"/movies/:id\" component={MovieForm} />\n\t\t\t\t\t\t<Route path=\"/movies\" exact render={(props) => <Movies {...props} user={user} />} />\n\t\t\t\t\t\t<Route path=\"/customers\" component={Customers} />\n\t\t\t\t\t\t<Route path=\"/rentals\" component={Rentals} />\n\t\t\t\t\t\t<Route path=\"/not-found\" component={NotFound} />\n\t\t\t\t\t\t<Redirect from=\"/\" exact to=\"/movies\" />\n\t\t\t\t\t\t<Redirect to=\"/not-found\" />\n\t\t\t\t\t</Switch>\n\t\t\t\t</main>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport logger from './services/logService';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.css';\n\nlogger.init();\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<BrowserRouter>\n\t\t\t<App />\n\t\t</BrowserRouter>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}