(this.webpackJsonpvidly=this.webpackJsonpvidly||[]).push([[0],{115:function(e,t,n){},136:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(47),c=n.n(s),i=n(17),o=n(145),l=n(19),u=n(81);var d={init:function(){o.a({dsn:"https://80d836676907418d9afd5d507d5dd728@o1054113.ingest.sentry.io/6039258",integrations:[new u.a.BrowserTracing],tracesSampleRate:1})},log:function(e){l.a(e)}},b=(n(90),n(7)),h=n(10),j=n(11),m=n(13),p=n(12),v=n(5),f=n(30),O=n(39),g=n(9),x=n.n(g),y=n(20),k=n(77),S=n(31),w=n.n(S);w.a.defaults.baseURL="backend-url...",w.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(d.log(e),f.b.error("An unexpected error occurred.")),Promise.reject(e)}));var N={get:w.a.get,post:w.a.post,put:w.a.put,delete:w.a.delete,setJwt:function(e){w.a.defaults.headers.common["x-auth-token"]=e}},C="token";N.setJwt(P());var I=function(){var e=Object(y.a)(x.a.mark((function e(t,n){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.post("/auth",{email:t,password:n});case 2:a=e.sent,r=a.data,localStorage.setItem(C,r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function P(){return localStorage.getItem(C)}var M={login:I,loginWithJwt:function(e){localStorage.setItem(C,e)},logout:function(){localStorage.removeItem(C)},getCurrentUser:function(){try{var e=localStorage.getItem(C);return Object(k.a)(e)}catch(t){return null}},getJwt:P},R=n(1),L=["component","render"],D=function(e){var t=e.component,n=e.render,a=Object(O.a)(e,L);return Object(R.jsx)(v.b,Object(b.a)(Object(b.a)({},a),{},{render:function(e){return M.getCurrentUser()?t?Object(R.jsx)(t,Object(b.a)({},e)):n(e):Object(R.jsx)(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},G=function(e){var t=e.user;return Object(R.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(R.jsxs)("div",{className:"container-fluid",children:[Object(R.jsx)(i.b,{className:"navbar-brand",to:"/",children:"Vidly"}),Object(R.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(R.jsx)("span",{className:"navbar-toggler-icon"})}),Object(R.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(R.jsxs)("ul",{className:"navbar-nav",children:[Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link","aria-current":"page",to:"/movies",children:"Movies"})}),Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/customers",children:"Customers"})}),Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/rentals",children:"Rentals"})}),!t&&Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/register",children:"Register"})})]}),t&&Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/profile",children:t.name})}),Object(R.jsx)("li",{className:"nav-item",children:Object(R.jsx)(i.c,{className:"nav-link",to:"/logout",children:"Logout"})})]})]})})]})})},F=n(82);function B(e){return"/movies/".concat(e||"")}var T=function(e,t){return e?N.put(B(e),t):N.post(B(),t)},V=function(e){return N.delete(B(e))},A=function(){return N.get("/genres")},U=n(29),_=n.n(U),z=function(e){var t={cursor:"pointer"},n=e.itemsCount,a=e.pageSize,r=e.currentPage,s=e.onPageChange,c=n/a,i=_.a.range(1,c+1),o=i.map((function(e){return Object(R.jsx)("li",{className:e===r?"page-item active":"page-item",children:Object(R.jsx)("button",{className:"page-link",style:t,onClick:function(){return s(e)},href:"#",children:e})},e)})),l=i[i.length-1];return Object(R.jsx)("nav",{"aria-label":"Page navigation",className:"d-flex justify-content-center",children:Object(R.jsxs)("ul",{className:"pagination",children:[Object(R.jsx)("li",{className:"page-item",children:Object(R.jsx)("button",{className:"page-link",style:t,onClick:function(){return s(1)},href:"#","aria-label":"Previous",children:Object(R.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),o,Object(R.jsx)("li",{className:"page-item",children:Object(R.jsx)("button",{className:"page-link",style:t,onClick:function(){return s(l)},href:"#","aria-label":"Next",children:Object(R.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})};function K(e,t,n){var a=(t-1)*n;return _()(e).slice(a).take(n).value()}n(115);var q=function(e){var t=e.genres,n=e.onItemSelect,a=e.selectedItem,r=e.textProperty,s=e.valueProperty,c={cursor:"pointer"},i=t.map((function(e){return Object(R.jsx)("li",{onClick:function(){return n(e[s])},style:c,className:"list-group-item ".concat(a===e[s]?"active":""),children:e[r]},e[s])}));return Object(R.jsx)("ul",{className:"list-group",children:i})};q.defaultProps={textProperty:"name",valueProperty:"_id"};var J=q,E=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).raiseSort=function(t){if(t){var n=e.props,a=n.sortingValue,r=n.onMovieSort,s="asc";a.path===t&&(s="asc"===a.order?"desc":"asc"),r({path:t,order:s})}},e.raiseSortIcon=function(t){var n=e.props.sortingValue;if(!t.path||t.path!==n.path)return null;var a="asc"===n.order?"fa fa-sort-asc":"fa fa-sort-desc";return Object(R.jsx)("i",{className:a,"aria-hidden":"true"})},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props.columns,n={cursor:"pointer"},a=t.map((function(t){return Object(R.jsxs)("th",{style:t.label?n:{},onClick:function(){return e.raiseSort(t.path)},scope:"col",children:[t.label," ",e.raiseSortIcon(t)]},t.label||t.key)}));return Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{scope:"col",children:"#"},"Numth"),a]})})}}]),n}(a.Component),Q=E,$=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t){return t.content?Object(R.jsx)("td",{children:t.content(e)},t.path||t.key):Object(R.jsx)("td",{children:_.a.get(e,t.path)},t.path)},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return Object(R.jsx)("tbody",{children:n.map((function(t,n){return Object(R.jsxs)("tr",{children:[Object(R.jsx)("th",{scope:"row",children:n+1},"numth"),a.map((function(n){return e.renderCell(t,n)}))]},t._id)}))})}}]),n}(a.Component),W=$,Z=function(e){var t=e.columns,n=e.sortingValue,a=e.onMovieSort,r=e.movies;return Object(R.jsxs)("table",{className:"table",children:[Object(R.jsx)(Q,{columns:t,sortingValue:n,onMovieSort:a}),Object(R.jsx)(W,{data:r,columns:t})]})},H=function(e){var t=e.id,n=e.userLikes,a=e.onMovieLike,r="fa fa-heart";n.includes(t)||(r+="-o");return Object(R.jsx)("i",{className:r,onClick:function(){return a(t)},style:{cursor:"pointer"},"aria-hidden":"true"})},X=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n),(e=t.call(this)).columns=[{path:"title",label:"Title"},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(t){return Object(R.jsx)(H,{userLikes:e.props.currentUser.likes,onMovieLike:e.props.onMovieLike,id:t._id})}}],e.deleteColumn={key:"delete",content:function(t){return Object(R.jsx)("button",{onClick:function(){return e.props.onMovieDelete(t._id)},className:"btn btn-danger btn-sm",children:"Delete"})}};var a=M.getCurrentUser();return a&&a.isAdmin&&e.columns.push(e.deleteColumn),e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.movies,n=e.onMovieSort,a=e.sortingValue;return Object(R.jsx)(Z,{movies:t,columns:this.columns,sortingValue:a,onMovieSort:n})}}]),n}(a.Component),Y=["name","label","error"],ee=function(e){var t=e.name,n=e.label,a=e.error,r=Object(O.a)(e,Y);return Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)("label",{htmlFor:t,className:"form-label",children:n}),Object(R.jsx)("input",Object(b.a)(Object(b.a)({},r),{},{autoFocus:"username"===t,id:t,name:t,className:"form-control"})),a&&Object(R.jsx)("div",{className:"alert alert-danger",role:"alert",children:a})]})},te=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.labelKey,a=e.value,r=e.onChange;return Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)("input",{onChange:function(e){r(e.currentTarget.value)},value:a,className:"form-control",list:"datalistOptions",id:"exampleDataList",placeholder:"Type to search..."}),Object(R.jsx)("datalist",{id:"datalistOptions",children:t.map((function(e){return Object(R.jsx)("option",{value:e[n]},e._id)}))})]})}}]),n}(a.Component),ne=te,ae=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={movies:[],genres:[],currentUser:{likes:[]},pageSize:3,currentPage:1,selectedGenreId:"",sortingValue:{path:"title",order:"asc"},searchQuery:""},e.getPagedData=function(){var t=e.state,n=t.movies,a=t.pageSize,r=t.currentPage,s=t.selectedGenreId,c=t.sortingValue,i=t.searchQuery,o=e.filterMoviesByGenre(n,s);i&&(o=e.filterMovieBySearch(n,i));var l=_.a.orderBy(o,[c.path],[c.order]),u=K(l,r,a);return{totalCount:l.length,data:u}},e.view=function(){var t=e.state,n=t.movies,a=t.currentUser,s=t.pageSize,c=t.currentPage,o=t.sortingValue,l=t.searchQuery,u=e.getPagedData(),d=u.totalCount,b=u.data,h=e.props.user,j="There are no movies",m=null;return 0!==d&&(j="Showing ".concat(d," movies"),m=Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)(X,{movies:b,currentUser:a,onMovieDelete:e.handleDelete,onMovieLike:e.handleLike,onMovieSort:e.handleSort,sortingValue:o}),Object(R.jsx)(z,{itemsCount:d,pageSize:s,currentPage:c,onPageChange:e.handlePageChange})]})),Object(R.jsxs)(r.a.Fragment,{children:[h&&Object(R.jsx)(i.b,{to:"/movies/new",className:"btn btn-primary mb-3",children:"New Movie"}),Object(R.jsx)("p",{className:"mb-3 text-muted",children:j}),Object(R.jsx)(ne,{data:n,value:l,labelKey:"title",onChange:e.handleSearchChange}),m]})},e.handlePageChange=function(t){e.setState({currentPage:t})},e.handleLike=function(t){var n=Object(b.a)({},e.state.currentUser);if(n.likes.includes(t)){var a=n.likes.indexOf(t);n.likes.splice(a,1)}else n.likes.push(t);e.setState(Object(b.a)(Object(b.a)({},e.state),{},{currentUser:n}))},e.handleDelete=function(){var t=Object(y.a)(x.a.mark((function t(n){var a,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.movies,r=a.filter((function(e){return e._id!==n})),e.setState({movies:r}),t.prev=3,t.next=6,V(n);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(3),t.t0.response&&404===t.t0.response.status&&f.b.error("This movie has already been deleted."),e.setState({movies:a});case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleGenreSelect=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState({selectedGenreId:t,searchQuery:"",currentPage:1})},e.handleSearchChange=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState({searchQuery:t,selectedGenreId:"",currentPage:1})},e.handleSort=function(t){e.setState({sortingValue:t})},e.filterMovieBySearch=function(e,t){return t?e.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())})):e},e.filterMoviesByGenre=function(e,t){return t?e.filter((function(e){return e.genre._id===t})):e},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.get(B());case 2:return t=e.sent,n=t.data,e.next=6,A();case 6:a=e.sent,r=a.data,this.setState({movies:n,genres:[{_id:"",name:"All Genres"}].concat(Object(F.a)(r))});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.movies,n=e.currentPage,a=e.pageSize,r=e.selectedGenreId,s=e.searchQuery,c=this.filterMoviesByGenre(t,r);s&&(c=this.filterMovieBySearch(t,s)),(n-1)*a+1>c.length&&n>1&&this.handlePageChange(n-1)}},{key:"render",value:function(){var e=this.state,t=e.genres,n=e.selectedGenreId;return Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)("h2",{className:"my-5 text-center",children:"Movie List"}),Object(R.jsxs)("div",{className:"row",children:[Object(R.jsx)("div",{className:"col-4 col-md-3",children:Object(R.jsx)(J,{genres:t,onItemSelect:this.handleGenreSelect,selectedItem:n})}),Object(R.jsx)("div",{className:"col",children:this.view()})]})]})}}]),n}(a.Component),re=ae,se=n(18),ce=n.n(se),ie=n(80),oe=["name","label","options","error","valueKey","labelKey"],le=function(e){var t=e.name,n=e.label,a=e.options,r=e.error,s=e.valueKey,c=e.labelKey,i=Object(O.a)(e,oe);return Object(R.jsxs)("div",{className:"mb-3",children:[Object(R.jsx)("label",{htmlFor:t,className:"form-label",children:n}),Object(R.jsxs)("select",Object(b.a)(Object(b.a)({},i),{},{name:t,id:t,className:"form-select","aria-label":"Select Input",children:[Object(R.jsx)("option",{value:"",children:"Select ".concat(n)},"select-label"),a.map((function(e){return Object(R.jsx)("option",{value:e[s],children:e[c]},e[s])}))]})),r&&Object(R.jsx)("div",{className:"alert alert-danger",role:"alert",children:r})]})},ue=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{},errors:{}},e.validate=function(){var t=e.state.data,n=e.schema.validate(t,{abortEarly:!1}).error;if(!n)return null;var a,r={},s=Object(ie.a)(n.details);try{for(s.s();!(a=s.n()).done;){var c=a.value;r[c.path[0]]=c.message}}catch(i){s.e(i)}finally{s.f()}return r},e.validateProperty=function(t){var n=t.name,a=t.value,r=e.schema.$_terms.keys.find((function(e){return e.key===n})).schema.validate(a).error;return r?r.details[0].message:null},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.doSubmit()},e.handleChange=function(t){var n=t.currentTarget,a=Object(b.a)({},e.state),r=e.validateProperty(n);r?a[n.name]=r:delete a[n.name];var s=Object(b.a)({},e.state.data);s[n.name]=n.value,e.setState({data:s,errors:a})},e}return Object(j.a)(n,[{key:"renderButton",value:function(e){return Object(R.jsx)("button",{disabled:this.validate(),className:"btn btn-primary",children:e})}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=this.state,r=a.data,s=a.errors;return Object(R.jsx)(ee,{name:e,onChange:this.handleChange,label:t,value:r[e],type:n,error:s[e]})}},{key:"renderSelect",value:function(e,t,n,a,r){var s=this.state,c=s.data,i=s.errors;return Object(R.jsx)(le,{name:e,label:t,options:n,onChange:this.handleChange,value:c[e],error:i[e],valueKey:a,labelKey:r})}}]),n}(a.Component),de=ue,be=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{title:"",genreId:"",numberInStock:"",dailyRentalRate:""},genres:[],errors:{}},e.schema=ce.a.object({title:ce.a.string().required().label("Title"),genreId:ce.a.string().required().label("Genre"),numberInStock:ce.a.number().ruleset.min(1).max(100).rule({message:"Number must be between 1 and 100"}).label("Stock"),dailyRentalRate:ce.a.number().ruleset.min(0).max(10).rule({message:"Number must be between 0 and 10"}).label("Rate")}),e.doSubmit=Object(y.a)(x.a.mark((function t(){var n,a,r,s,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.match,r=n.history,s=e.state.data,c="new"!==(c=a.params.id)?c:null,t.prev=4,t.next=7,T(c,s);case 7:r.push("/movies"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),t.t0.response&&400===t.t0.response.status&&f.b.error("Please login first to do this kind of stuff.");case 13:case"end":return t.stop()}}),t,null,[[4,10]])}))),e}return Object(j.a)(n,[{key:"populateGenres",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,n=t.data,this.setState({genres:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"populateMovie",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,n,a,r,s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.match,a=t.history,e.prev=1,"new"!==(r=n.params.id)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,i=r,N.get(B(i));case 7:s=e.sent,c=s.data,this.setState({data:this.mapToViewModel(c)}),e.next=16;break;case 12:if(e.prev=12,e.t0=e.catch(1),!e.t0.response||404!==e.t0.response.status){e.next=16;break}return e.abrupt("return",a.replace("/not-found"));case 16:case"end":return e.stop()}var i}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateGenres();case 2:return e.next=4,this.populateMovie();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mapToViewModel",value:function(e){var t=e.title,n=e.genre,a=e.numberInStock,r=e.dailyRentalRate;return{title:t,genreId:n._id,numberInStock:a,dailyRentalRate:r}}},{key:"render",value:function(){var e=this.state.genres;return Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Movie Form"}),Object(R.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("title","Title"),this.renderSelect("genreId","Genre",e,"_id","name"),this.renderInput("numberInStock","Number In Stock","number"),this.renderInput("dailyRentalRate","Rate","number"),this.renderButton("Save")]})]})}}]),n}(de),he=be,je=function(){return Object(R.jsx)("h1",{children:"Rentals"})},me=function(){return Object(R.jsx)("h1",{children:"Customers"})},pe=function(){return Object(R.jsx)("h1",{children:"Not Found"})},ve=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:""},errors:{}},e.schema=ce.a.object({email:ce.a.string().required().label("Email"),password:ce.a.string().required().label("Password")}),e.doSubmit=Object(y.a)(x.a.mark((function t(){var n,a,r,s,c,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.data,a=n.email,r=n.password,t.prev=1,t.next=4,M.login(a,r);case 4:s=e.props.location.state,window.location=s?s.from.pathname:"/",t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&(c=Object(b.a)({},e.state.data),i=Object(b.a)({},e.state.errors),c.password="",i.email=t.t0.response.data,e.setState({data:c,errors:i}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e}return Object(j.a)(n,[{key:"render",value:function(){return M.getCurrentUser()?Object(R.jsx)(v.a,{to:"/"}):Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Login"}),Object(R.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("email","Email"),this.renderInput("password","Password","password"),this.renderButton("Login")]})]})}}]),n}(de),fe=ve;var Oe=function(e){var t,n=e.email,a=e.password,r=e.name;return N.post("/users/".concat(t||""),{email:n,password:a,name:r})},ge=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={data:{email:"",password:"",name:""},errors:{}},e.schema=ce.a.object({email:ce.a.string().email({minDomainSegments:2,maxDomainSegments:3,tlds:{allow:["com","net","vn"]}}).required().label("Email"),password:ce.a.string().pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&.,])[A-Za-z\d@$!%*?&.,]{8,16}$/).message("Minimum 8 and maximun 16 characters, at least one uppercase letter, one lowercase letter, one number and one special character(@$!%*?&.,)").required().label("Password"),name:ce.a.string().required().label("Name")}),e.doSubmit=Object(y.a)(x.a.mark((function t(){var n,a,r,s,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.data,t.prev=1,t.next=4,Oe(n);case 4:a=t.sent,r=a.headers,s=r["x-auth-token"],M.loginWithJwt(s),window.location="/",t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&((c=Object(b.a)({},e.state.errors)).email=t.t0.response.data,e.setState({errors:c}));case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),e}return Object(j.a)(n,[{key:"render",value:function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("h1",{children:"Register"}),Object(R.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.renderInput("email","Email"),this.renderInput("password","Password","password"),this.renderInput("name","Name"),this.renderButton("Register")]})]})}}]),n}(de),xe=ge,ye=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"componentDidMount",value:function(){M.logout(),window.location="/"}},{key:"render",value:function(){return null}}]),n}(a.Component),ke=ye,Se=(n(135),n(136),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=M.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return Object(R.jsxs)(r.a.Fragment,{children:[Object(R.jsx)(f.a,{}),Object(R.jsx)(G,{user:e}),Object(R.jsx)("main",{className:"container",children:Object(R.jsxs)(v.d,{children:[Object(R.jsx)(v.b,{path:"/login",render:function(e){return Object(R.jsx)(fe,Object(b.a)({},e))}}),Object(R.jsx)(v.b,{path:"/logout",component:ke}),Object(R.jsx)(v.b,{path:"/register",render:function(e){return Object(R.jsx)(xe,Object(b.a)({},e))}}),Object(R.jsx)(D,{path:"/movies/:id",component:he}),Object(R.jsx)(v.b,{path:"/movies",exact:!0,render:function(t){return Object(R.jsx)(re,Object(b.a)(Object(b.a)({},t),{},{user:e}))}}),Object(R.jsx)(v.b,{path:"/customers",component:me}),Object(R.jsx)(v.b,{path:"/rentals",component:je}),Object(R.jsx)(v.b,{path:"/not-found",component:pe}),Object(R.jsx)(v.a,{from:"/",exact:!0,to:"/movies"}),Object(R.jsx)(v.a,{to:"/not-found"})]})})]})}}]),n}(a.Component)),we=Se,Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(137),n(138);d.init(),c.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(i.a,{children:Object(R.jsx)(we,{})})}),document.getElementById("root")),Ne()},90:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.382cb5d2.chunk.js.map